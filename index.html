<!DOCTYPE html>
<html>
<head>
  <title>Wattwise â€“ Smart Solar Estimation</title>

  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css">
  <link rel="stylesheet" href="https://unpkg.com/leaflet-draw/dist/leaflet.draw.css">

  <style>
    body {
      font-family: Arial;
      margin: 0;
      background: #f4f6f8;
    }

    header {
      background: #1e8e3e;
      color: white;
      padding: 15px;
      text-align: center;
      font-size: 22px;
    }

    #map {
      height: 450px;
    }

    .container {
      padding: 15px;
      max-width: 900px;
      margin: auto;
    }

    .card {
      background: white;
      padding: 15px;
      margin-top: 15px;
      border-radius: 8px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }

    .value {
      color: #1e8e3e;
      font-weight: bold;
    }

    footer {
      text-align: center;
      font-size: 12px;
      padding: 10px;
      color: #666;
    }
  </style>
</head>
<a href="https://wa.me/919405815225" target="_blank"
   style="
     position: fixed;
     bottom: 20px;
     right: 20px;
     background: #25D366;
     color: white;
     padding: 12px 16px;
     border-radius: 50px;
     text-decoration: none;
     font-weight: bold;
     box-shadow: 0 2px 6px rgba(0,0,0,0.3);
   ">
  ðŸ’¬ WhatsApp Us
</a>

<body>

<header>
  âš¡ Wattwise
  <div style="font-size:14px;">Smart Solar Estimation Platform</div>
</header>


<div id="map"></div>

<div class="container">
  <div class="card" id="result"> 
    <h3>Solar Estimation Result</h3>
    <P>How to use</P>
    <p>1. Click on a polygon on the left side of map to select your area.</p>
    <p>2. Start putting the dots on map select your area.</p>
    <p>3. To complete the selection place your last dot on where you started.</p>
    <p>2. View the estimated solar system size, installation cost, subsidy, and potential savings based on your selection.</p>
  </p>
</div>


<footer>
  Â© 2026 Wattwise<br>
  All calculations are approximate. Final installation cost, subsidy,
  and generation depend on site survey, DISCOM rules, and equipment selection.
</footer>


<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script src="https://unpkg.com/leaflet-draw/dist/leaflet.draw.js"></script>
<script src="https://unpkg.com/leaflet-geometryutil"></script>

<script>
  var map = L.map('map').setView([20.5937, 78.9629], 5);


  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);

  var drawnItems = new L.FeatureGroup();
  map.addLayer(drawnItems);

  var drawControl = new L.Control.Draw({
    draw: {
      polygon: true,
      rectangle: true,
      circle: false,
      marker: false,
      polyline: false
    },
    edit: { featureGroup: drawnItems }
  });

  map.addControl(drawControl);

  map.on(L.Draw.Event.CREATED, function (e) {
    drawnItems.clearLayers();
    drawnItems.addLayer(e.layer);

    var area = L.GeometryUtil.geodesicArea(e.layer.getLatLngs()[0]);
    var areaSqM = area.toFixed(1);

    // Solar size
    var solarKW = areaSqM / 10;

    // Cost logic
    var costPerKW = solarKW <= 3 ? 65000 : solarKW <= 6 ? 58000 : 52000;
    var totalCost = solarKW * costPerKW;

    // Subsidy (India rooftop)
    var subsidy = solarKW <= 3 ? solarKW * 14588 : 43764;
    var finalCost = totalCost - subsidy;

    // Generation
    var monthlyUnits = solarKW * 4 * 30;
    var yearlyUnits = monthlyUnits * 12;

    // Savings
    var unitPrice = 6;
    var monthlySavings = monthlyUnits * unitPrice;
    var yearlySavings = yearlyUnits * unitPrice;

    document.getElementById("result").innerHTML = `
      <h3>Solar Estimation Result</h3>
      

      <p><b>Selected Area:</b> <span class="value">${areaSqM} mÂ²</span></p>
      <p><b>Recommended System Size:</b> <span class="value">${solarKW.toFixed(1)} kW</span></p>

      <hr>

      <p><b>Approx Installation Cost:</b> â‚¹${totalCost.toFixed(0)}</p>
      <p><b>Govt Subsidy:</b> â‚¹${subsidy.toFixed(0)}</p>
      <p><b>Estimated Payable Cost:</b> <span class="value">â‚¹${finalCost.toFixed(0)}</span></p>

      <hr>

      <p><b>Monthly Generation:</b> ${monthlyUnits.toFixed(0)} units</p>
      <p><b>Yearly Generation:</b> ${yearlyUnits.toFixed(0)} units</p>

      <p><b>Monthly Savings:</b> â‚¹${monthlySavings.toFixed(0)}</p>
      <p><b>Yearly Savings:</b> <span class="value">â‚¹${yearlySavings.toFixed(0)}</span></p>
    `;
  });
</script>

</body>
</html>
